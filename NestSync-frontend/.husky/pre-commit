#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run JSX structure validation
echo "ğŸ” Checking JSX structure..."
node scripts/audit-jsx-violations.js --dry-run

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ JSX structure violations found!"
  echo "Run 'node scripts/fix-jsx-violations.js' to fix automatically"
  echo "Or fix manually and commit again"
  exit 1
fi

echo "âœ… JSX structure check passed"

# Run ESLint
echo "ğŸ” Running ESLint..."
npm run lint

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ ESLint errors found!"
  echo "Fix the errors and commit again"
  exit 1
fi

echo "âœ… All checks passed"
